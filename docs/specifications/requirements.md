# Git Quest - 要件定義書

## 1. プロジェクト概要

### 1.1 目的
Gitの操作を学べるインタラクティブなWebアプリケーションを開発し、初心者が視覚的かつ実践的にGitの基本操作を習得できる環境を提供する。

### 1.2 目標
- Gitコマンドの実行結果を視覚的に理解できる
- VS Codeライクな親しみやすいUIで学習できる
- ブラウザのみで完結し、サーバー不要で動作する
- 何度でもやり直せる安全な学習環境を提供する

## 2. システム要件

### 2.1 機能要件

#### 2.1.1 チュートリアルシステム
- ステップバイステップの学習フロー
- ファーストステージ（ターミナルベース）とセカンドステージ（GUIベース）の2段階学習
- 各ステップでのリアルタイムバリデーション
- 正しい操作の自動検出と次ステップへの自動遷移

#### 2.1.2 Gitコマンド実行機能
**対応コマンド:**
- `git clone` - リポジトリのクローン
- `git branch` - ブランチの一覧表示・作成
- `git checkout` - ブランチの切り替え
- `git checkout -b` - ブランチの作成と切り替え
- `git add` - ファイルのステージング
- `git commit` - コミットの作成
- `git push` - リモートへのプッシュ
- `git status` - 状態確認
- `git log` - コミット履歴の表示

**コマンド制限:**
- 各ステップで許可されたコマンドのみ実行可能
- 不正なコマンドにはエラーメッセージとヒントを表示

#### 2.1.3 ファイル編集機能
- エディタでのファイル内容の閲覧
- ファイル内容の編集
- 編集内容の自動保存

#### 2.1.4 ソース管理機能（VS Codeライク）
- 変更ファイルの一覧表示
- ステージング済みファイルの一覧表示
- ファイルごとのステージング操作
- コミットメッセージ入力
- コミット・プッシュボタン
- コミット履歴の表示

#### 2.1.5 リセット機能
- 「リセット」ボタンで最初の状態に戻る
- ページリロードでも初期状態にリセット

### 2.2 非機能要件

#### 2.2.1 パフォーマンス
- 初回ロード時間: 3秒以内
- コマンド実行レスポンス: 500ms以内
- UI操作レスポンス: 100ms以内

#### 2.2.2 互換性
- モダンブラウザ対応（Chrome, Firefox, Safari, Edge）
- Node.js 18.x以上

#### 2.2.3 可用性
- 静的サイトホスティングで稼働可能
- オフライン動作（初回ロード後）

#### 2.2.4 保守性
- TypeScriptによる型安全な実装
- テストカバレッジ70%以上
- コンポーネント単位での再利用性

## 3. 画面仕様

### 3.1 レイアウト構成

```
┌────────────────────────────────────────────────────┐
│ ヘッダー（タイトル + リセットボタン）                │
├─────┬──────────────────────┬──────────────────────┤
│     │                      │                      │
│ 左  │   中央エディタ       │   右側説明ペイン     │
│ サ  │                      │                      │
│ イ  │                      │   - ステップタイトル │
│ ド  │                      │   - 説明             │
│ バ  │                      │   - ヒント           │
│ ー  ├──────────────────────┤   - 成功条件         │
│     │   ターミナル         │                      │
│     │                      │                      │
├─────┴──────────────────────┴──────────────────────┤
│ ステータスバー（ブランチ名表示）                     │
└────────────────────────────────────────────────────┘
```

### 3.2 左サイドバー
- アイコンバー（エクスプローラー/ソース管理切替）
- エクスプローラービュー: ファイルツリー表示
- ソース管理ビュー:
  - 変更ファイル一覧
  - ステージング済みファイル一覧
  - コミットメッセージ入力欄
  - コミット/プッシュボタン
  - コミット履歴

### 3.3 中央エディタペイン
- ファイル名タブ表示
- コード編集エリア（テキストエリア）
- 編集可能/不可の状態管理

### 3.4 ターミナル
- コマンド入力欄
- コマンド履歴表示
- 実行結果表示
- エラーメッセージ・ヒント表示

### 3.5 右側説明ペイン
- 現在のステップ番号・タイトル
- ステップの説明（Markdown形式）
- ヒント表示
- 成功条件の表示

### 3.6 ステータスバー
- 現在のブランチ名
- 同期状態（↑↓の数）

## 4. 学習フロー仕様

### 4.1 ファーストステージ（ターミナルベース）

#### Step 0: 初期状態
- 目的: チュートリアルの説明
- 操作: 「次へ」ボタンをクリック

#### Step 1: git clone
- 目的: リポジトリのクローン
- 許可コマンド: `git clone /remote-repo`
- 成功条件: ワークスペースにファイルが存在する

#### Step 2: ブランチ作成
- 目的: 新しいブランチを作成して切り替え
- 許可コマンド: `git branch`, `git checkout`, `git checkout -b`
- 成功条件: `feature/add-greeting`ブランチが作成され、チェックアウトされている

#### Step 3: ファイル編集
- 目的: greeting.txtを編集
- 許可コマンド: `git status`, `git diff`
- 成功条件: greeting.txtに"Hello, Git!"が含まれている

#### Step 4: git add
- 目的: 変更をステージング
- 許可コマンド: `git add`, `git status`
- 成功条件: greeting.txtがステージングされている

#### Step 5: git commit
- 目的: コミットを作成
- 許可コマンド: `git commit`, `git log`
- 成功条件: 新しいコミットが作成されている

#### Step 6: git push
- 目的: リモートにプッシュ
- 許可コマンド: `git push`
- 成功条件: プッシュが成功している（シミュレート）

### 4.2 セカンドステージ（GUIベース）

ファーストステージと同じ操作をGUIで実行：

#### Step 2-1: ブランチ作成（GUI）
- 操作: ステータスバーのブランチ名 → 新しいブランチを作成

#### Step 3-1: ファイル編集（GUI）
- 操作: エクスプローラーからファイル選択 → エディタで編集

#### Step 4-1: ステージング（GUI）
- 操作: ソース管理ビューで「+」ボタンをクリック

#### Step 5-1: コミット（GUI）
- 操作: コミットメッセージ入力 → コミットボタンクリック

#### Step 6-1: プッシュ（GUI）
- 操作: プッシュボタンをクリック

## 5. データ仕様

### 5.1 仮想ファイルシステム
- LightningFS（IndexedDB）を使用
- `/remote-repo`: 架空のリモートリポジトリ
- `/workspace`: ユーザーのワークスペース

### 5.2 初期ファイル構成
```
/remote-repo/
├── README.md
├── greeting.txt
└── src/
    └── main.js
```

### 5.3 状態管理
- Zustandでアプリケーション全体の状態を管理
- Git状態（ブランチ、ステージング、コミット等）
- チュートリアル状態（現在のステップ、ステージ）
- ファイルシステム状態（ファイル一覧、現在のファイル）
- ターミナル出力履歴

## 6. 制約事項

### 6.1 技術的制約
- ブラウザのみで動作（サーバー不要）
- IndexedDBを使用するため、プライベートブラウジングでは制限あり
- ファイルサイズは小規模なテキストファイルのみ対応

### 6.2 機能的制約
- Git操作はチュートリアルで定義されたコマンドのみ
- マージ、リベース、コンフリクト解決は対象外（今後の拡張候補）
- 実際のGitHubとの連携は行わない

### 6.3 UI/UX制約
- VS Code Light Modernテーマのみ対応
- 日本語のみ対応（多言語化は今後の拡張候補）
- レスポンシブデザインは最低限（デスクトップメイン）

## 7. 今後の拡張案

### 7.1 高優先度
- より詳細なGit操作の追加（merge, rebase等）
- コンフリクト解決のチュートリアル
- プログレス保存機能

### 7.2 中優先度
- 多言語対応（英語等）
- ダークテーマ対応
- アニメーション・トランジション追加

### 7.3 低優先度
- カスタムチュートリアルの作成機能
- ソーシャル共有機能
- 学習進捗のトラッキング
